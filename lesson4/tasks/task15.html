<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>–°–æ–±–µ—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥: –£—Ä–æ–∫ 4</title>
<style>
body {
font-family: Arial, sans-serif;
margin: 0;
padding: 8px;
font-size: 14px;
line-height: 1.4;
background: #fff;
color: #333;
}

h2 {
margin: 0 0 8px 0;
font-size: 16px;
text-align: center;
font-weight: bold;
}

.instructions {
padding: 8px;
margin-bottom: 10px;
font-size: 13px;
background: #f5f5f5;
border: 1px solid #ddd;
border-radius: 4px;
}

.instructions p {
margin: 4px 0;
}

.task-container {
margin-bottom: 15px;
padding-bottom: 8px;
border-bottom: 1px solid #eee;
}

.task-title {
font-size: 14px;
font-weight: bold;
text-align: center;
margin: 6px 0;
}

.oracle-text {
font-size: 20px;
text-align: center;
margin: 8px 0;
font-weight: bold;
color: #111;
}

.word-pool, .drop-area {
min-height: 30px;
padding: 6px;
margin: 6px 0;
display: flex;
flex-wrap: wrap;
gap: 4px;
border: 1px solid #ccc;
border-radius: 4px;
background: #f9f9f9;
font-size: 14px;
justify-content: center;
}

.drop-area {
border-color: #3498db;
background: #eef7ff;
}

.drop-area::before {
content: '[–ø—É—Å—Ç–æ]';
color: #999;
font-style: italic;
}

.drop-area.has-words::before {
content: none;
}

.word-box {
background: white;
border: 1px solid #aaa;
padding: 4px 8px;
font-size: 14px;
cursor: pointer;
user-select: none;
white-space: nowrap;
}

.word-box:hover {
background: #e0e0e0;
}

.controls {
text-align: center;
margin: 10px 0;
}

button {
padding: 6px 10px;
margin: 0 6px;
font-size: 14px;
background: #0066cc;
color: white;
border: none;
border-radius: 4px;
cursor: pointer;
}

button:active {
background: #0055aa;
}

#result {
margin: 10px 0;
padding: 8px;
font-size: 14px;
text-align: center;
border-radius: 4px;
display: none;
}

.success {
background: #e8f5e9;
color: #27ae60;
}

.error {
background: #ffebee;
color: #e74c3c;
}
</style>

</head>
<body>

<h2>–°–æ–±–µ—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥: –£—Ä–æ–∫ 4</h2>

<div class="instructions">
<p><strong>–ö–ª–∏–∫–∞–π—Ç–µ –ø–æ —Å–ª–æ–≤–∞–º</strong>, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥.</p>
<p>–ö–∞–∂–¥–æ–µ –∑–∞–¥–∞–Ω–∏–µ —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö –£—Ä–æ–∫–∞ 4.</p>
<p>üí° <em>–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é "Ëá™...Ëá≥‰∫é..." –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è!</em></p>
</div>

<div class="task-container">
<div class="task-title">1. Ëá™‰ªä</div>
<div class="oracle-text">Ëá™‰ªä</div>
<div id="word-pool1" class="word-pool"></div>
<div id="drop-area1" class="drop-area"></div>
<div class="instructions" style="font-size:12px; padding:4px; margin-top:4px">
<p>üí° –≠—Ç–∞ —Ñ—Ä–∞–∑–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç <strong>–ø—Ä–µ–¥–ª–æ–≥ Ëá™</strong> –≤ –∑–Ω–∞—á–µ–Ω–∏–∏ <strong>"–Ω–∞—á–∏–Ω–∞—è —Å"</strong></p>
</div>
</div>

<div class="task-container">
<div class="task-title">2. Ëá™‰ªäËá≥‰∫éÁî≤Ëæ∞</div>
<div class="oracle-text">Ëá™‰ªäËá≥‰∫éÁî≤Ëæ∞</div>
<div id="word-pool2" class="word-pool"></div>
<div id="drop-area2" class="drop-area"></div>
<div class="instructions" style="font-size:12px; padding:4px; margin-top:4px">
<p>üí° –ó–¥–µ—Å—å –≤–∞–∂–Ω–æ <strong>–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è Ëá™...Ëá≥‰∫é...</strong> –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–∞–º–æ–∫</p>
</div>
</div>

<div class="task-container">
<div class="task-title">3. Ëá™‰∏äÁî≤</div>
<div class="oracle-text">Ëá™‰∏äÁî≤</div>
<div id="word-pool3" class="word-pool"></div>
<div id="drop-area3" class="drop-area"></div>
<div class="instructions" style="font-size:12px; padding:4px; margin-top:4px">
<p>üí° –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ <strong>Ëá™</strong> –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å –∏–º–µ–Ω–∞–º–∏ –ø—Ä–µ–¥–∫–æ–≤</p>
</div>
</div>

<div class="task-container">
<div class="task-title">4. Êó¨Èõ®</div>
<div class="oracle-text">Êó¨Èõ®</div>
<div id="word-pool4" class="word-pool"></div>
<div id="drop-area4" class="drop-area"></div>
<div class="instructions" style="font-size:12px; padding:4px; margin-top:4px">
<p>üí° –≠—Ç–∞ —Ñ—Ä–∞–∑–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –≤—ã—Ä–∞–∂–∞–µ—Ç—Å—è <strong>–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è</strong></p>
</div>
</div>

<div class="controls">
<button id="check-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
<button id="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
</div>

<p id="result"></p>

<script>
// –û–∂–∏–¥–∞–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
const expected1 = [
['–Ω–∞—á–∏–Ω–∞—è', '—Å', '—Å–µ–≥–æ–¥–Ω—è'],
['–æ—Ç', '—Å–µ–≥–æ–¥–Ω—è', '–∏', '–¥–æ'],
['—Å', '—Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ', '–¥–Ω—è']
];

const expected2 = [
['–Ω–∞—á–∏–Ω–∞—è', '—Å', '—Å–µ–≥–æ–¥–Ω—è', '–∏', '–¥–æ', '–¥–Ω—è', '—Ü–∑—è-—á–µ–Ω'],
['—Å', '—Å–µ–≥–æ–¥–Ω—è', '–ø–æ', '–¥–µ–Ω—å', '—Ü–∑—è-—á–µ–Ω'],
['–æ—Ç', '—Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ', '–¥–Ω—è', '–∏', '–¥–æ', '–¥–Ω—è', '—Ü–∑—è-—á–µ–Ω']
];

const expected3 = [
['–Ω–∞—á–∏–Ω–∞—è', '—Å', '–í–µ—Ä—Ö–Ω–µ–≥–æ', '–¶–∑—è'],
['—Å', '–í–µ—Ä—Ö–Ω–µ–≥–æ', '–¶–∑—è'],
['–æ—Ç', '–í–µ—Ä—Ö–Ω–µ–≥–æ', '–¶–∑—è', '–∏', '–¥–∞–ª–µ–µ']
];

const expected4 = [
['–¥–æ–∂–¥—å', '–±—É–¥–µ—Ç', '–∏–¥—Ç–∏', '–≤', '—Ç–µ—á–µ–Ω–∏–µ', '–¥–µ–∫–∞–¥—ã'],
['–¥–æ–∂–¥—å', '–≤', '—Ç–µ—á–µ–Ω–∏–µ', '–¥–µ—Å—è—Ç–∏', '–¥–Ω–µ–π'],
['–¥–æ–∂–¥—å', '–Ω–∞', '–ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏', '–¥–µ–∫–∞–¥—ã']
];

const words1 = ['–Ω–∞—á–∏–Ω–∞—è', '—Å', '—Å–µ–≥–æ–¥–Ω—è', '–ø–æ—Å–ª–µ', '—Å–µ–π—á–∞—Å', '–≤', '—ç—Ç–æ—Ç', '–¥–µ–Ω—å', '–¥–æ', '–∏–∑', '–ø–æ—Å–ª–µ', '—ç—Ç–æ–≥–æ'];
const words2 = ['–Ω–∞—á–∏–Ω–∞—è', '—Å', '—Å–µ–≥–æ–¥–Ω—è', '–∏', '–¥–æ', '–¥–Ω—è', '—Ü–∑—è-—á–µ–Ω', '–ø–æ—Å–ª–µ', '—ç—Ç–æ–≥–æ', '–º–µ—Å—è—Ü–∞', '–≤', '—Ç–µ—á–µ–Ω–∏–µ', '—ç—Ç–æ–≥–æ', '–≤—Ä–µ–º–µ–Ω–∏'];
const words3 = ['–Ω–∞—á–∏–Ω–∞—è', '—Å', '–í–µ—Ä—Ö–Ω–µ–≥–æ', '–¶–∑—è', '–ø–æ—Å–ª–µ', '—ç—Ç–æ–≥–æ', '–ø—Ä–µ–¥–∫–∞', '–≤', '—ç–ø–æ—Ö—É', '—ç—Ç–æ–≥–æ', '–ø—Ä–∞–≤–∏—Ç–µ–ª—è'];
const words4 = ['–¥–æ–∂–¥—å', '–±—É–¥–µ—Ç', '–∏–¥—Ç–∏', '–≤', '—Ç–µ—á–µ–Ω–∏–µ', '–¥–µ–∫–∞–¥—ã', '—Å–µ–π—á–∞—Å', '–∑–∞–≤—Ç—Ä–∞', '–ø–æ—Å–ª–µ', '—ç—Ç–æ–≥–æ', '–º–µ—Å—è—Ü–∞', '—É—Ç—Ä–æ–º', '–≤–µ—á–µ—Ä–æ–º'];

const wordPool1 = document.getElementById('word-pool1');
const wordPool2 = document.getElementById('word-pool2');
const wordPool3 = document.getElementById('word-pool3');
const wordPool4 = document.getElementById('word-pool4');
const dropArea1 = document.getElementById('drop-area1');
const dropArea2 = document.getElementById('drop-area2');
const dropArea3 = document.getElementById('drop-area3');
const dropArea4 = document.getElementById('drop-area4');
const checkBtn = document.getElementById('check-btn');
const resetBtn = document.getElementById('reset-btn');
const resultEl = document.getElementById('result');

// –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ (–∞–ª–≥–æ—Ä–∏—Ç–º –§–∏—à–µ—Ä–∞-–ô–µ–π—Ç—Å–∞)
function shuffleArray(array) {
const arr = [...array];
for (let i = arr.length - 1; i > 0; i--) {
const j = Math.floor(Math.random() * (i + 1));
[arr[i], arr[j]] = [arr[j], arr[i]];
}
return arr;
}

// –°–æ–∑–¥–∞—ë–º DOM-—ç–ª–µ–º–µ–Ω—Ç—ã —Å–ª–æ–≤
function createWordElements(words, pool, dropArea) {
const shuffledWords = shuffleArray(words); // üîÅ –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º —Å–ª–æ–≤–∞
return shuffledWords.map(word => {
const box = document.createElement('div');
box.className = 'word-box';
box.textContent = word;

box.onclick = () => {
// –ü–µ—Ä–µ–º–µ—â–∞–µ–º –≤ drop-area
box.remove();
dropArea.appendChild(box);
updatePlaceholder(dropArea); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞
};

return box;
});
}

// –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å [–ø—É—Å—Ç–æ]
function updatePlaceholder(dropArea) {
const hasWords = Array.from(dropArea.children).some(el => el.classList.contains('word-box'));
dropArea.classList.toggle('has-words', hasWords);
}

let wordElements1 = [];
let wordElements2 = [];
let wordElements3 = [];
let wordElements4 = [];

function init() {
// –û—á–∏—â–∞–µ–º
wordPool1.innerHTML = '';
wordPool2.innerHTML = '';
wordPool3.innerHTML = '';
wordPool4.innerHTML = '';
dropArea1.innerHTML = '';
dropArea2.innerHTML = '';
dropArea3.innerHTML = '';
dropArea4.innerHTML = '';
resultEl.style.display = 'none';

// –ü–µ—Ä–µ—Å–æ–∑–¥–∞—ë–º —ç–ª–µ–º–µ–Ω—Ç—ã —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º
wordElements1 = createWordElements(words1, wordPool1, dropArea1);
wordElements2 = createWordElements(words2, wordPool2, dropArea2);
wordElements3 = createWordElements(words3, wordPool3, dropArea3);
wordElements4 = createWordElements(words4, wordPool4, dropArea4);

// –î–æ–±–∞–≤–ª—è–µ–º –≤ –ø—É–ª—ã
wordElements1.forEach(el => wordPool1.appendChild(el));
wordElements2.forEach(el => wordPool2.appendChild(el));
wordElements3.forEach(el => wordPool3.appendChild(el));
wordElements4.forEach(el => wordPool4.appendChild(el));

// –û–±–Ω–æ–≤–ª—è–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã
updatePlaceholder(dropArea1);
updatePlaceholder(dropArea2);
updatePlaceholder(dropArea3);
updatePlaceholder(dropArea4);
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –≤ drop-area: –≤–æ–∑–≤—Ä–∞—Ç –≤ –ø—É–ª
dropArea1.addEventListener('click', (e) => {
if (e.target.classList.contains('word-box')) {
const wordBox = e.target;
wordBox.remove();
wordPool1.appendChild(wordBox);
updatePlaceholder(dropArea1);
}
});

dropArea2.addEventListener('click', (e) => {
if (e.target.classList.contains('word-box')) {
const wordBox = e.target;
wordBox.remove();
wordPool2.appendChild(wordBox);
updatePlaceholder(dropArea2);
}
});

dropArea3.addEventListener('click', (e) => {
if (e.target.classList.contains('word-box')) {
const wordBox = e.target;
wordBox.remove();
wordPool3.appendChild(wordBox);
updatePlaceholder(dropArea3);
}
});

dropArea4.addEventListener('click', (e) => {
if (e.target.classList.contains('word-box')) {
const wordBox = e.target;
wordBox.remove();
wordPool4.appendChild(wordBox);
updatePlaceholder(dropArea4);
}
});

function getWords(dropArea) {
return Array.from(dropArea.children)
.filter(el => el.classList.contains('word-box'))
.map(el => el.textContent.trim());
}

checkBtn.addEventListener('click', () => {
const current1 = getWords(dropArea1);
const current2 = getWords(dropArea2);
const current3 = getWords(dropArea3);
const current4 = getWords(dropArea4);

const isCorrect1 = expected1.some(option => arraysEqual(current1, option));
const isCorrect2 = expected2.some(option => arraysEqual(current2, option));
const isCorrect3 = expected3.some(option => arraysEqual(current3, option));
const isCorrect4 = expected4.some(option => arraysEqual(current4, option));

if (isCorrect1 && isCorrect2 && isCorrect3 && isCorrect4) {
resultEl.innerHTML = `‚úÖ <b>–ò–¥–µ–∞–ª—å–Ω–æ!</b> –í—ã —É—Å–≤–æ–∏–ª–∏ –∫–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –£—Ä–æ–∫–∞ 4: –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é "Ëá™...Ëá≥‰∫é..." –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è.`;
resultEl.className = 'message success';
resultEl.style.display = 'block';
sendResult(true);
} else {
let message = '‚ùå –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:';
if (!isCorrect1) message += '<br>‚Ä¢ –í –ø–µ—Ä–≤–æ–º –∑–∞–¥–∞–Ω–∏–∏: –ø—Ä–µ–¥–ª–æ–≥ Ëá™ –≤ –∑–Ω–∞—á–µ–Ω–∏–∏ "–Ω–∞—á–∏–Ω–∞—è —Å"';
if (!isCorrect2) message += '<br>‚Ä¢ –í–æ –≤—Ç–æ—Ä–æ–º: –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è Ëá™...Ëá≥‰∫é... –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–∞–º–æ–∫';
if (!isCorrect3) message += '<br>‚Ä¢ –í —Ç—Ä–µ—Ç—å–µ–º: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Ëá™ —Å –∏–º–µ–Ω–∞–º–∏ –ø—Ä–µ–¥–∫–æ–≤';
if (!isCorrect4) message += '<br>‚Ä¢ –í —á–µ—Ç–≤–µ—Ä—Ç–æ–º: –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è (Êó¨)';

resultEl.innerHTML = message;
resultEl.className = 'message error';
resultEl.style.display = 'block';
sendResult(false, message);
}
});

resetBtn.addEventListener('click', init);

function arraysEqual(a, b) {
if (a.length !== b.length) return false;
for (let i = 0; i < a.length; i++) {
if (a[i] !== b[i]) return false;
}
return true;
}

function sendResult(success, message) {
window.parent.postMessage({
type: "TASK_RESULT",
success: !!success,
message: message || (success ? "–í–µ—Ä–Ω–æ" : "–û—à–∏–±–∫–∞")
}, "*");
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
window.onload = init;
window.parent.postMessage({ type: "TASK_EXISTS", valid: true }, "*");
</script>
</body>
</html>