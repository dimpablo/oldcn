<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href="../../tasks.css">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã: –£—Ä–æ–∫ 10</title>
</head>
<body>

<h2>–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã: –°–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã</h2>

<div class="instructions">
    <div class="instructions-header" onclick="toggleInstructions()">
        <strong>üìå –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–Ω–∞–∂–º–∏ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)</strong>
        <span class="arrow">‚ñº</span>
    </div>
    <div class="instructions-content" style="display:none">
        <p><strong>–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ vs –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞</strong></p>
        <p>–í –∞—Ä—Ö–∞–∏—á–µ—Å–∫–æ–º –¥—Ä–µ–≤–Ω–µ–∫–∏—Ç–∞–π—Å–∫–æ–º —è–∑—ã–∫–µ –¥–ª—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö, —É—Å–ª–æ–≤–Ω—ã—Ö –∏–ª–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å —á–∞—Å—Ç–∏—Ü–µ–π <strong>ÂÖ∂ (q√≠)</strong>. –≠—Ç–æ –∫–ª—é—á–µ–≤–∞—è —Ç–µ–º–∞ –£—Ä–æ–∫–∞ 10.</p>

        <p>üü¢ <strong>–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ</strong> ‚Äî –≤—ã—Ä–∞–∂–∞–µ—Ç –ø—Ä—è–º–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–ª–∏ –ø—Ä–æ–≥–Ω–æ–∑:</p>
        <ul>
            <li>ÊúâÁ•ü y«íu su√¨ ‚Äî ¬´–µ—Å—Ç—å –∑–Ω–∞–º–µ–Ω–∏–µ¬ª</li>
            <li>‰∫°Á¶ç w√°ng hu√≤ ‚Äî ¬´–Ω–µ—Ç –±–µ–¥—ã¬ª</li>
            <li>–ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —É—Å–ª–æ–≤–∏–π, –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ –∏–ª–∏ —Å–æ–º–Ω–µ–Ω–∏–π.</li>
        </ul>

        <p>üî¥ <strong>–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞</strong> ‚Äî –≤—ã—Ä–∞–∂–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ, —É—Å–ª–æ–≤–Ω—ã–µ –∏–ª–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã —Å –ø–æ–º–æ—â—å—é —á–∞—Å—Ç–∏—Ü—ã <strong>ÂÖ∂ (q√≠)</strong>:</p>
        <ul>
            <li>ÂÖ∂Êúâ‰æÜËâ±ÔºåÂÖ∂‰∫°‰æÜËâ± q√≠ y«íu l√°i jiƒÅn, q√≠ w√°ng l√°i jiƒÅn ‚Äî ¬´[–ï—Å–ª–∏] –ø—Ä–∏–¥—É—Ç –±–µ–¥—ã, [–µ—Å–ª–∏] –Ω–µ –ø—Ä–∏–¥—É—Ç –±–µ–¥—ã¬ª</li>
            <li>‰∏çÂòâÔºåÂÖ∂ÂòâÔºå‰∏çÂêâ b√π jiƒÅ, q√≠ jiƒÅ, b√π j√≠ ‚Äî ¬´–ù–µ –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—Å—è. [–ê –µ—Å–ª–∏ –∏] –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—Å—è, —Ç–æ –∫ –Ω–µ—Å—á–∞—Å—Ç—å—é¬ª</li>
            <li>–ß–∞—Å—Ç–∏—Ü–∞ <strong>ÂÖ∂</strong> –≤–≤–æ–¥–∏—Ç –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫—É—é –∏–ª–∏ —É—Å–ª–æ–≤–Ω—É—é —Å–∏—Ç—É–∞—Ü–∏—é.</li>
            <li>–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ—Ç–∏–≤–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–≥–æ –∏ –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å—Ö–æ–¥–∞.</li>
            <li>–ù–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –∫–∞–∫ ¬´–µ—Å–ª–∏¬ª, ¬´–∞ –µ—Å–ª–∏¬ª, ¬´—Ç–æ... —Ç–æ¬ª.</li>
        </ul>

        <p><em>–ü—Ä–∏–º–µ—Ä—ã:</em><br>
        "Êó¨‰∫°Á¶ç" ‚Üí üü¢ (–ø—Ä–æ—Å—Ç–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)<br>
        "ÂÖ∂Êúâ‰æÜËâ±ÔºåÂÖ∂‰∫°‰æÜËâ±" ‚Üí üî¥ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã)</p>

        <p><strong>–í–∞–∂–Ω–æ!</strong><br>
        –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å <strong>ÂÖ∂</strong> –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
        <ol>
            <li>–î–ª—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è <strong>—É—Å–ª–æ–≤–Ω–æ—Å—Ç–∏</strong> –∏ <strong>–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã</strong> –≤ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è—Ö.</li>
            <li>–° —á–∞—Å—Ç–∏—Ü–µ–π <strong>ÂÖ∂ (q√≠)</strong>, –∫–æ—Ç–æ—Ä–∞—è –≤–≤–æ–¥–∏—Ç –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫—É—é —Å–∏—Ç—É–∞—Ü–∏—é.</li>
            <li>–ß—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å <strong>–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</strong> –æ–¥–Ω–æ–≥–æ –∏—Å—Ö–æ–¥–∞ –æ—Ç –¥—Ä—É–≥–æ–≥–æ (¬´–µ—Å–ª–∏... —Ç–æ¬ª).</li>
            <li>–í –æ—Ç–≤–µ—Ç–∞—Ö –ø—Ä–∞–≤–∏—Ç–µ–ª—è (<strong>ÁéãÂç†Êõ∞</strong>) –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.</li>
        </ol>
        –≠—Ç–æ –∫–ª—é—á–µ–≤–∞—è –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –£—Ä–æ–∫–∞ 10.</p>
    </div>
</div>

<script>
function toggleInstructions() {
    const content = document.querySelector('.instructions-content');
    const header = document.querySelector('.instructions-header');
    const arrow = header.querySelector('.arrow');
    const isHidden = content.style.display === 'none';

    content.style.display = isHidden ? 'block' : 'none';
    arrow.textContent = isHidden ? '‚ñ≤' : '‚ñº';

    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è –æ –Ω–æ–≤–æ–π –≤—ã—Å–æ—Ç–µ
    setTimeout(() => {
        window.parent.postMessage({
            type: "UPDATE_HEIGHT",
            height: document.body.scrollHeight
        }, "*");
    }, 100);
}
</script>

<div class="columns">
    <div id="column1" class="column"></div>
    <div id="column2" class="column"></div>
</div>

<div class="controls">
    <button id="check-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <button id="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
</div>

<p id="result"></p>

<script>
const sentences = [
    { text: "Êó¨‰∫°Á¶ç", type: "direct", explanation: "–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ: ¬´–ó–∞ –¥–µ—Å—è—Ç–∏–¥–Ω–µ–≤–∫—É –Ω–µ –±—É–¥–µ—Ç –±–µ–¥—ã¬ª ‚Äî –ø—Ä—è–º–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ" },
    { text: "ÂÖ∂Êúâ‰æÜËâ±ÔºåÂÖ∂‰∫°‰æÜËâ±", type: "chain", explanation: "–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: ¬´[–ï—Å–ª–∏] –ø—Ä–∏–¥—É—Ç –±–µ–¥—ã, [–µ—Å–ª–∏] –Ω–µ –ø—Ä–∏–¥—É—Ç –±–µ–¥—ã¬ª ‚Äî —á–∞—Å—Ç–∏—Ü–∞ ÂÖ∂ –≤–≤–æ–¥–∏—Ç –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏" },
    { text: "ÊúâÁ•ü", type: "direct", explanation: "–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ: ¬´–ï—Å—Ç—å –∑–Ω–∞–º–µ–Ω–∏–µ¬ª ‚Äî –ø—Ä—è–º–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±–µ–∑ —É—Å–ª–æ–≤–∏–π" },
    { text: "ÂÖ∂Êúâ‰æÜËâ±", type: "chain", explanation: "–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: ¬´[–ï—Å–ª–∏] –ø—Ä–∏–¥—É—Ç –±–µ–¥—ã¬ª ‚Äî –≤–≤–µ–¥–µ–Ω–∏–µ –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è —Å –ø–æ–º–æ—â—å—é ÂÖ∂" },
    { text: "ÁéãÂç†Êõ∞ÊúâÁ•ü", type: "direct", explanation: "–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ: ¬´–ü—Ä–∞–≤–∏—Ç–µ–ª—å –ø—Ä–æ—á–µ–ª –æ—Ç–≤–µ—Ç: –µ—Å—Ç—å –∑–Ω–∞–º–µ–Ω–∏–µ¬ª ‚Äî –ø—Ä—è–º–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ" },
    { text: "ÁéãÂç†Êõ∞‰∏çÂòâÔºåÂÖ∂ÂòâÔºå‰∏çÂêâ", type: "chain", explanation: "–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: ¬´–ü—Ä–∞–≤–∏—Ç–µ–ª—å –ø—Ä–æ—á–µ–ª –æ—Ç–≤–µ—Ç: –Ω–µ –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—Å—è. [–ê –µ—Å–ª–∏ –∏] –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—Å—è, —Ç–æ –∫ –Ω–µ—Å—á–∞—Å—Ç—å—é¬ª ‚Äî –ø—Ä–æ—Ç–∏–≤–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–æ–≤" },
    { text: "ÂÖÅÊúâ‰æÜËâ±", type: "direct", explanation: "–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ: ¬´–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –±—ã–ª–∏ –±–µ–¥—ã¬ª ‚Äî –∫–æ–Ω—Å—Ç–∞—Ç–∞—Ü–∏—è —Ñ–∞–∫—Ç–∞" },
    { text: "ÂÖ∂ÊúâË®≠Ôºå‰∏çÂêâÔºåÂÖ∂ÂîØÁî≤ÊúâË®≠ÔºåÂêâ", type: "chain", explanation: "–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: ¬´[–ï—Å–ª–∏] –±—É–¥–µ—Ç –∑–Ω–∞–º–µ–Ω–∏–µ, –∫ –Ω–µ—Å—á–∞—Å—Ç—å—é; [–µ—Å–ª–∏] –∑–Ω–∞–º–µ–Ω–∏–µ –±—É–¥–µ—Ç –≤ –¥–µ–Ω—å —Ü–∑—è, –∫ —Å—á–∞—Å—Ç—å—é¬ª ‚Äî —É—Å–ª–æ–≤–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã —Å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º" },
    { text: "ÂúüÊñπÂæÅ‰∫éÊàëÊù±ÈÑô", type: "direct", explanation: "–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ: ¬´–ü–ª–µ–º—è –¢—É –Ω–∞–ø–∞–¥–∞–µ—Ç –Ω–∞ –Ω–∞—à—É –≤–æ—Å—Ç–æ—á–Ω—É—é –æ–∫—Ä–∞–∏–Ω—É¬ª ‚Äî –ø—Ä—è–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" },
    { text: "ÂÖ∂ÂîØËæõÊúâË®≠Ôºå‰∫¶‰∏çÂêâ", type: "chain", explanation: "–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: ¬´[–ï—Å–ª–∏] –∑–Ω–∞–º–µ–Ω–∏–µ –±—É–¥–µ—Ç –≤ –¥–µ–Ω—å —Å–∏–Ω—å, [—Ç–æ] —Ç–∞–∫–∂–µ –∫ –Ω–µ—Å—á–∞—Å—Ç—å—é¬ª ‚Äî –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π" }
];

function shuffleArray(array) {
    const arr = [...array];
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
}

function createSentenceElement(sentence, index) {
    const item = document.createElement('div');
    item.className = 'sentence-item';
    item.dataset.index = index;

    item.innerHTML = `
        <div class="oracle-text">${sentence.text}</div>
        <div class="toggle-container">
            <span class="toggle-text">–ü—Ä–æ—Å—Ç–æ–µ</span>
            <label class="toggle-switch">
                <input type="checkbox">
                <span class="slider"></span>
            </label>
            <span class="toggle-text">–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞</span>
        </div>
    `;

    return item;
}

function init() {
    const shuffled = shuffleArray([...sentences]);
    const column1 = document.getElementById('column1');
    const column2 = document.getElementById('column2');

    column1.innerHTML = '';
    column2.innerHTML = '';
    document.getElementById('result').style.display = 'none';

    document.querySelectorAll('.sentence-item').forEach(el => el.remove());

    shuffled.slice(0, 5).forEach((s, i) => {
        const el = createSentenceElement(s, i);
        column1.appendChild(el);
    });

    shuffled.slice(5).forEach((s, i) => {
        const el = createSentenceElement(s, i + 5);
        column2.appendChild(el);
    });
}

function checkAnswers() {
    const items = document.querySelectorAll('.sentence-item');
    let allCorrect = true;

    items.forEach(item => {
        const index = item.dataset.index;
        const input = item.querySelector('input');
        const expectedType = sentences[index].type;
        const isCorrect = (input.checked && expectedType === "chain") ||
                          (!input.checked && expectedType === "direct");

        item.classList.remove('correct', 'incorrect');
        if (isCorrect) {
            item.classList.add('correct');
        } else {
            item.classList.add('incorrect');
            allCorrect = false;
        }
    });

    const resultEl = document.getElementById('result');
    if (allCorrect) {
        resultEl.innerHTML = `
            ‚úÖ <b>–û—Ç–ª–∏—á–Ω–æ!</b> –í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ –≤—Å–µ —Å–ª—É—á–∞–∏ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã—Ö –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤.<br>
            <small>–í—ã —É—Å–≤–æ–∏–ª–∏: —á–∞—Å—Ç–∏—Ü–∞ ÂÖ∂ ‚Äî –∫–ª—é—á–µ–≤–æ–π –º–∞—Ä–∫–µ—Ä —É—Å–ª–æ–≤–Ω—ã—Ö –∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤.</small>
        `;
        resultEl.className = 'success';
        sendResult(true);
    } else {
        resultEl.innerHTML = `‚ùå <b>–û—à–∏–±–∫–∞</b> –≤ –æ–¥–Ω–æ–º –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è—Ö.`;
        resultEl.className = 'error';
        sendResult(false);
    }
    resultEl.style.display = 'block';
}

function reset() {
    document.querySelectorAll('.toggle-switch input').forEach(input => {
        input.checked = false;
    });
    document.querySelectorAll('.sentence-item').forEach(item => {
        item.classList.remove('correct', 'incorrect');
    });
    document.getElementById('result').style.display = 'none';
}

function sendResult(success) {
    window.parent.postMessage({
        type: "TASK_RESULT",
        success: success,
        message: success ? "–í–µ—Ä–Ω–æ" : "–û—à–∏–±–∫–∞"
    }, "*");
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
window.onload = init;
window.parent.postMessage({ type: "TASK_EXISTS", valid: true }, "*");

document.getElementById('check-btn').addEventListener('click', checkAnswers);
document.getElementById('reset-btn').addEventListener('click', reset);
</script>
</body>
</html>