<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href="../../tasks.css">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>–û–¥–∏–Ω–æ—á–Ω–æ–µ vs –¶–µ–ø–æ—á–∫–∞: –£—Ä–æ–∫ 7</title>
</head>
<body>

<h2>–û–¥–∏–Ω–æ—á–Ω–æ–µ vs –¶–µ–ø–æ—á–∫–∞: –°–∫–∞–∑—É–µ–º—ã–µ –≤ –¥–µ–π—Å—Ç–≤–∏–∏</h2>

<div class="instructions">
    <div class="instructions-header" onclick="toggleInstructions()">
        <strong>üìå –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–Ω–∞–∂–º–∏ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)</strong>
        <span class="arrow">‚ñº</span>
    </div>
    <div class="instructions-content" style="display:none">
        <p><strong>–û–¥–∏–Ω–æ—á–Ω–æ–µ —Å–∫–∞–∑—É–µ–º–æ–µ vs –¶–µ–ø–æ—á–∫–∞ —Å–∫–∞–∑—É–µ–º—ã—Ö</strong></p>
        <p>–í –∞—Ä—Ö–∞–∏—á–µ—Å–∫–æ–º –¥—Ä–µ–≤–Ω–µ–∫–∏—Ç–∞–π—Å–∫–æ–º —è–∑—ã–∫–µ —Å–∫–∞–∑—É–µ–º–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω–æ—á–Ω—ã–º, –Ω–æ –∏ –æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å <strong>—Ü–µ–ø–æ—á–∫—É</strong>, —á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω–æ –¥–ª—è –≤–æ–µ–Ω–Ω—ã—Ö –ø—Ä–∏–∫–∞–∑–æ–≤ –∏ –º–∏—Å—Å–∏–π.</p>

        <p>üü¢ <strong>–û–¥–∏–Ω–æ—á–Ω–æ–µ —Å–∫–∞–∑—É–µ–º–æ–µ</strong> ‚Äî –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ:</p>
        <ul>
            <li>Áéã‰ª§Â©¶Â•Ω w√°ng l√¨ng f√π h«éo ‚Äî ¬´–ü—Ä–∞–≤–∏—Ç–µ–ª—å –ø—Ä–∏–∫–∞–∑–∞–ª –Ω–µ–≤–µ—Å—Ç–∫–µ –•–∞–æ¬ª</li>
            <li>–ó–∞–≤–µ—Ä—à–∞–µ—Ç —Å–º—ã—Å–ª, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è</li>
        </ul>

        <p>üî¥ <strong>–¶–µ–ø–æ—á–∫–∞ —Å–∫–∞–∑—É–µ–º—ã—Ö</strong> ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π:</p>
        <ul>
            <li>Áéã‰ª§Â©¶Â•ΩÂæû‰æØÈ´ò‰ºêÂ§∑ w√°ng l√¨ng f√π h«éo c√≥ng h√≥u gƒÅo f√° y√≠ ‚Äî ¬´–ü—Ä–∞–≤–∏—Ç–µ–ª—å –ø—Ä–∏–∫–∞–∑–∞–ª –Ω–µ–≤–µ—Å—Ç–∫–µ –•–∞–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å –∑–∞ —Ö–æ—É –ì–∞–æ –≤ –ø–æ—Ö–æ–¥–µ –ø—Ä–æ—Ç–∏–≤ –ø–ª–µ–º–µ–Ω–∏ –ò¬ª</li>
            <li>–¶–µ–ø–æ—á–∫–∞: ‰ª§ ‚Üí Âæû ‚Üí ‰ºê (–ø—Ä–∏–∫–∞–∑–∞—Ç—å ‚Üí —Å–ª–µ–¥–æ–≤–∞—Ç—å ‚Üí –ø–æ—Ö–æ–¥)</li>
            <li>–í—Ç–æ—Ä–æ–µ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–∫–∞–∑—É–µ–º—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–¥–ª–µ–∂–∞—â–µ–≥–æ ‚Äî –æ–Ω–æ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è</li>
        </ul>

        <p><em>–ü—Ä–∏–º–µ—Ä—ã:</em><br>
        "Áôª‰∫∫‰∫îÂçÉ" ‚Üí üü¢ (–æ–¥–∏–Ω–æ—á–Ω–æ–µ: —Å–æ–±—Ä–∞—Ç—å –ø—è—Ç—å —Ç—ã—Å—è—á —á–µ–ª–æ–≤–µ–∫)<br>
        "‰ª§ÁæΩÁúîÈõû‰ª•Â∞πÂæûÊ¥óÈúá" ‚Üí üî¥ (—Ü–µ–ø–æ—á–∫–∞: –ø—Ä–∏–∫–∞–∑–∞—Ç—å –Æ–π –∏ –¶–∑–∏ —ÅÂ∞π–æ–º —Å–ª–µ–¥–æ–≤–∞—Ç—å –∑–∞ –ß–∂—ç–Ω–µ–º)</p>

        <p><strong>–í–∞–∂–Ω–æ!</strong><br>
        –≠—Ç–∞ –¥–∏—Ö–æ—Ç–æ–º–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞:
        <ol>
            <li>–†–µ—á—å –æ <strong>–ø—Ä–∏–∫–∞–∑–∞—Ö</strong>, <strong>–ø–æ—Ö–æ–¥–∞—Ö</strong> –∏–ª–∏ <strong>–º–∏—Å—Å–∏—è—Ö</strong></li>
            <li>–ü–µ—Ä–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (—á–∞—Å—Ç–æ ‰ª§ –∏–ª–∏ Âëº) <strong>–ø–æ—Ä–æ–∂–¥–∞–µ—Ç</strong> –≤—Ç–æ—Ä–æ–µ</li>
            <li>–ù–µ—Ç –º–æ–¥–∞–ª—å–Ω—ã—Ö –≥–ª–∞–≥–æ–ª–æ–≤ ‚Äî –≤–º–µ—Å—Ç–æ ¬´—Ö–æ—á—É —Å–¥–µ–ª–∞—Ç—å¬ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ü–µ–ø–æ—á–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π</li>
        </ol>
        –≠—Ç–æ –∫–ª—é—á–µ–≤–∞—è –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –£—Ä–æ–∫–∞ 7.</p>
    </div>
</div>

<script>
function toggleInstructions() {
    const content = document.querySelector('.instructions-content');
    const header = document.querySelector('.instructions-header');
    const arrow = header.querySelector('.arrow');
    const isHidden = content.style.display === 'none';

    content.style.display = isHidden ? 'block' : 'none';
    arrow.textContent = isHidden ? '‚ñ≤' : '‚ñº';

    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è –æ –Ω–æ–≤–æ–π –≤—ã—Å–æ—Ç–µ
    setTimeout(() => {
        window.parent.postMessage({
            type: "UPDATE_HEIGHT",
            height: document.body.scrollHeight
        }, "*");
    }, 100);
}
</script>

<div class="columns">
    <div id="column1" class="column"></div>
    <div id="column2" class="column"></div>
</div>

<div class="controls">
    <button id="check-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <button id="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
</div>

<p id="result"></p>

<script>
const sentences = [
    { text: "Áéã‰ª§Â©¶Â•Ω", type: "direct", explanation: "–û–¥–∏–Ω–æ—á–Ω–æ–µ —Å–∫–∞–∑—É–µ–º–æ–µ: ¬´–ü—Ä–∞–≤–∏—Ç–µ–ª—å –ø—Ä–∏–∫–∞–∑–∞–ª –Ω–µ–≤–µ—Å—Ç–∫–µ –•–∞–æ¬ª ‚Äî –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ" },
    { text: "Áéã‰ª§Â©¶Â•ΩÂæû‰æØÈ´ò‰ºêÂ§∑", type: "chain", explanation: "–¶–µ–ø–æ—á–∫–∞ —Å–∫–∞–∑—É–µ–º—ã—Ö: ‰ª§ ‚Üí Âæû ‚Üí ‰ºê ‚Äî –ø—Ä–∏–∫–∞–∑–∞—Ç—å, —Å–ª–µ–¥–æ–≤–∞—Ç—å, –ø–æ—Ö–æ–¥" },
    { text: "Áôª‰∫∫‰∫îÂçÉ", type: "direct", explanation: "–û–¥–∏–Ω–æ—á–Ω–æ–µ: ¬´–°–æ–±—Ä–∞—Ç—å –ø—è—Ç—å —Ç—ã—Å—è—á —á–µ–ª–æ–≤–µ–∫¬ª ‚Äî –Ω–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è" },
    { text: "‰ª§ÁæΩÁúîÈõû‰ª•Â∞πÂæûÊ¥óÈúá", type: "chain", explanation: "–¶–µ–ø–æ—á–∫–∞: ¬´–ü—Ä–∏–∫–∞–∑–∞—Ç—å –Æ–π –∏ –¶–∑–∏ —ÅÂ∞π–æ–º —Å–ª–µ–¥–æ–≤–∞—Ç—å –∑–∞ –ß–∂—ç–Ω–µ–º –∏–∑ –ø–ª–µ–º–µ–Ω–∏ –°–∏¬ª" },
    { text: "ÁéãÂãøÂæûÊ¥óÈúá", type: "direct", explanation: "–û–¥–∏–Ω–æ—á–Ω–æ–µ —Å–∫–∞–∑—É–µ–º–æ–µ: ¬´–ü—Ä–∞–≤–∏—Ç–µ–ª—é –Ω–µ —Å–ª–µ–¥—É–µ—Ç —Å–ª–µ–¥–æ–≤–∞—Ç—å –∑–∞ –ß–∂—ç–Ω–µ–º¬ª ‚Äî –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è" },
    { text: "Âëº‰ºêÂ∑•Êñπ", type: "chain", explanation: "–¶–µ–ø–æ—á–∫–∞: ¬´–û—Ç–¥–∞—Ç—å –ø—Ä–∏–∫–∞–∑ ‚Äî –ø–æ—Ö–æ–¥ –ø—Ä–æ—Ç–∏–≤ –ø–ª–µ–º–µ–Ω–∏ –ì—É–Ω¬ª ‚Äî –¥–≤–∞ —Å–∫–∞–∑—É–µ–º—ã—Ö –ø–æ–¥—Ä—è–¥" },
    { text: "ÂæÅÂúüÊñπ", type: "direct", explanation: "–û–¥–∏–Ω–æ—á–Ω–æ–µ: ¬´–ü–æ—Ö–æ–¥ –ø—Ä–æ—Ç–∏–≤ –ø–ª–µ–º–µ–Ω–∏ –¢—É¬ª ‚Äî –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ" },
    { text: "‰ª§Áï¢‰ª•Ë°Ü‰ºêÂ∑•Êñπ", type: "chain", explanation: "–¶–µ–ø–æ—á–∫–∞: ¬´–ü—Ä–∏–∫–∞–∑–∞—Ç—å –ë–∏ —Å –æ–ø–æ–ª—á–µ–Ω–∏–µ–º –∏–¥—Ç–∏ –ø–æ—Ö–æ–¥–æ–º –ø—Ä–æ—Ç–∏–≤ –ø–ª–µ–º–µ–Ω–∏ –ì—É–Ω¬ª" },
    { text: "ÁôªÂ©¶Â¶å‰∏âÂçÉ", type: "direct", explanation: "–û–¥–∏–Ω–æ—á–Ω–æ–µ: ¬´–°–æ–±—Ä–∞—Ç—å —Ç—Ä—ë—Ö —Ç—ã—Å—è—á –ø–æ–¥ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –Ω–µ–≤–µ—Å—Ç–∫–∏ –¶–∑–∏–Ω¬ª" },
    { text: "‰ª§Â©¶Â•ΩÂæû‰æØÈ´ò", type: "chain", explanation: "–¶–µ–ø–æ—á–∫–∞: ¬´–ü—Ä–∏–∫–∞–∑–∞—Ç—å –Ω–µ–≤–µ—Å—Ç–∫–µ –•–∞–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å –∑–∞ —Ö–æ—É –ì–∞–æ¬ª ‚Äî –¥–≤–∞ –¥–µ–π—Å—Ç–≤–∏—è" }
];

function shuffleArray(array) {
    const arr = [...array];
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
}

function createSentenceElement(sentence, index) {
    const item = document.createElement('div');
    item.className = 'sentence-item';
    item.dataset.index = index;

    item.innerHTML = `
        <div class="oracle-text">${sentence.text}</div>
        <div class="toggle-container">
            <span class="toggle-text">–û–¥–∏–Ω–æ—á–Ω–æ–µ</span>
            <label class="toggle-switch">
                <input type="checkbox">
                <span class="slider"></span>
            </label>
            <span class="toggle-text">–¶–µ–ø–æ—á–∫–∞</span>
        </div>
    `;

    return item;
}

function init() {
    const shuffled = shuffleArray([...sentences]);
    const column1 = document.getElementById('column1');
    const column2 = document.getElementById('column2');

    column1.innerHTML = '';
    column2.innerHTML = '';
    document.getElementById('result').style.display = 'none';

    document.querySelectorAll('.sentence-item').forEach(el => el.remove());

    shuffled.slice(0, 5).forEach((s, i) => {
        const el = createSentenceElement(s, i);
        column1.appendChild(el);
    });

    shuffled.slice(5).forEach((s, i) => {
        const el = createSentenceElement(s, i + 5);
        column2.appendChild(el);
    });
}

function checkAnswers() {
    const items = document.querySelectorAll('.sentence-item');
    let allCorrect = true;

    items.forEach(item => {
        const index = item.dataset.index;
        const input = item.querySelector('input');
        const expectedType = sentences[index].type;
        const isCorrect = (input.checked && expectedType === "chain") ||
                          (!input.checked && expectedType === "direct");

        item.classList.remove('correct', 'incorrect');
        if (isCorrect) {
            item.classList.add('correct');
        } else {
            item.classList.add('incorrect');
            allCorrect = false;
        }
    });

    const resultEl = document.getElementById('result');
    if (allCorrect) {
        resultEl.innerHTML = `
            ‚úÖ <b>–û—Ç–ª–∏—á–Ω–æ!</b> –í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ –≤—Å–µ —Å–ª—É—á–∞–∏ –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –∏ —Ü–µ–ø–æ—á–µ—á–Ω—ã—Ö —Å–∫–∞–∑—É–µ–º—ã—Ö.<br>
            <small>–í—ã —É—Å–≤–æ–∏–ª–∏: —Ü–µ–ø–æ—á–∫–∞ —Å–∫–∞–∑—É–µ–º—ã—Ö ‚Äî –∫–ª—é—á–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–æ–µ–Ω–Ω—ã—Ö –ø—Ä–∏–∫–∞–∑–æ–≤.</small>
        `;
        resultEl.className = 'success';
        sendResult(true);
    } else {
        resultEl.innerHTML = `‚ùå <b>–û—à–∏–±–∫–∞</b> –≤ –æ–¥–Ω–æ–º –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è—Ö.`;
        resultEl.className = 'error';
        sendResult(false);
    }
    resultEl.style.display = 'block';
}

function reset() {
    document.querySelectorAll('.toggle-switch input').forEach(input => {
        input.checked = false;
    });
    document.querySelectorAll('.sentence-item').forEach(item => {
        item.classList.remove('correct', 'incorrect');
    });
    document.getElementById('result').style.display = 'none';
}

function sendResult(success) {
    window.parent.postMessage({
        type: "TASK_RESULT",
        success: success,
        message: success ? "–í–µ—Ä–Ω–æ" : "–û—à–∏–±–∫–∞"
    }, "*");
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
window.onload = init;
window.parent.postMessage({ type: "TASK_EXISTS", valid: true }, "*");

document.getElementById('check-btn').addEventListener('click', checkAnswers);
document.getElementById('reset-btn').addEventListener('click', reset);
</script>
</body>
</html>