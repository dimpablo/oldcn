<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href="../../tasks.css">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>–ò–Ω–≤–µ—Ä—Å–∏—è vs –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫</title>
</head>
<body>

<h2>–ò–Ω–≤–µ—Ä—Å–∏—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è vs –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫</h2>

<div class="instructions">
<div class="instructions-header" onclick="toggleInstructions()">
<strong>üìå –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–Ω–∞–∂–º–∏ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)</strong>
<span class="arrow">‚ñº</span>
</div>
<div class="instructions-content" style="display:none">
<p><strong>–ò–Ω–≤–µ—Ä—Å–∏—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è vs –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫</strong></p>
<p>–í –¥—Ä–µ–≤–Ω–µ–∫–∏—Ç–∞–π—Å–∫–æ–º —è–∑—ã–∫–µ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–Ω–≤–µ—Ä—Å–∏—è –ø–æ—Ä—è–¥–∫–∞ —Å–ª–æ–≤:</p>

<p>üü¢ <strong>–ò–Ω–≤–µ—Ä—Å–∏—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è</strong> (–∑–µ–ª–µ–Ω—ã–π):</p>
<ul>
<li>–ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–∏ <strong>‰∏ç</strong> –∏ –º–µ—Å—Ç–æ–∏–º–µ–Ω–Ω–æ–º –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–∏</li>
<li>–ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ —Å—Ç–∞–≤–∏—Ç—Å—è <strong>–ø–µ—Ä–µ–¥ –≥–ª–∞–≥–æ–ª–æ–º</strong></li>
<li>–ü—Ä–∏–º–µ—Ä: <strong>‰∏çÊàëÈôçÁÜØ</strong> (–∞ –Ω–µ Êàë‰∏çÈôçÁÜØ)</li>
<li>–≠—Ç–æ <strong>–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è</strong> –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ –¥–∞–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö</li>
</ul>

<p>üî¥ <strong>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫</strong> (–∫—Ä–∞—Å–Ω—ã–π):</p>
<ul>
<li>–ù–æ—Ä–º–∞–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –±–µ–∑ –∏–Ω–≤–µ—Ä—Å–∏–∏</li>
<li>–ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ —Å—Ç–∞–≤–∏—Ç—Å—è <strong>–ø–æ—Å–ª–µ –≥–ª–∞–≥–æ–ª–∞</strong></li>
<li>–ü—Ä–∏–º–µ—Ä: <strong>Â∏ùÂèóÊàë‰Ωë</strong> (–í–∞–Ω –¥–∞—Ä—É–µ—Ç –Ω–∞–º –ø–æ–º–æ—â—å)</li>
<li>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö</li>
</ul>

<p><em>–ü—Ä–∏–º–µ—Ä—ã:</em><br>
"‰∏çÊàëÈôçÁÜØ" ‚Üí üü¢ (–∏–Ω–≤–µ—Ä—Å–∏—è –ø—Ä–∏ ‰∏ç + Êàë)<br>
"Â∏ùÂèóÊàë‰Ωë" ‚Üí üî¥ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫)</p>

<p><strong>–í–∞–∂–Ω–æ!</strong><br>
–ò–Ω–≤–µ—Ä—Å–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç <strong>—Ç–æ–ª—å–∫–æ</strong> –ø—Ä–∏ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è ‰∏ç –∏ –º–µ—Å—Ç–æ–∏–º–µ–Ω–Ω–æ–≥–æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è. –í–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤.</p>

<p><strong>–ì—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ:</strong><br>
–ö–æ–≥–¥–∞ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ ‰∏ç —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ–º –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ —Å—Ç–∞–≤–∏—Ç—Å—è –ø–µ—Ä–µ–¥ –≥–ª–∞–≥–æ–ª–æ–º: ‰∏ç + [–º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ] + [–≥–ª–∞–≥–æ–ª]. –≠—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ –¥—Ä–µ–≤–Ω–µ–∫–∏—Ç–∞–π—Å–∫–æ–º —è–∑—ã–∫–µ.</p>
</div>
</div>

<script>
function toggleInstructions() {
const header = document.querySelector('.instructions-header');
const content = document.querySelector('.instructions-content');
const isHidden = content.style.display === 'none';

content.style.display = isHidden ? 'block' : 'none';
header.classList.toggle('collapsed', !isHidden);

// –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è iframe (–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—é –Ω–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä)
setTimeout(() => {
window.parent.postMessage({
type: "UPDATE_HEIGHT",
height: document.body.scrollHeight
}, "*");
}, 100);
}
</script>

<div class="columns">
<div id="column1" class="column"></div>
<div id="column2" class="column"></div>
</div>

<div class="controls">
<button id="check-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
<button id="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
</div>

<p id="result"></p>

<script>
const sentences = [
{ text: "‰∏çÊàëÈôçÁÜØ", type: "inversion", explanation: "–∏–Ω–≤–µ—Ä—Å–∏—è –ø—Ä–∏ ‰∏ç + Êàë (–ù–µ–±–µ—Å–Ω—ã–π –í–ª–∞–¥—ã–∫–∞ –Ω–µ –ø–æ—à–ª—ë—Ç –ª–∏ –Ω–∞–º –∑–∞—Å—É—Ö—É?)" },
{ text: "Â∏ùÂèóÊàë‰Ωë", type: "standard", explanation: "—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (–í–∞–Ω –¥–∞—Ä—É–µ—Ç –Ω–∞–º –ø–æ–º–æ—â—å)" },
{ text: "Â∏ù‰∏çÊàëÂèó‰Ωë", type: "inversion", explanation: "–∏–Ω–≤–µ—Ä—Å–∏—è –ø—Ä–∏ ‰∏ç + Êàë (–í–∞–Ω –Ω–µ –¥–∞—Ä—É–µ—Ç –ª–∏ –Ω–∞–º –ø–æ–º–æ—â—å?)" },
{ text: "Â∏ùÂÖ∂ÂèóÈ¶¨Êñπ‰Ωë", type: "standard", explanation: "—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å —á–∞—Å—Ç–∏—Ü–µ–π ÂÖ∂ (–ü–æ—à–ª—ë—Ç –ª–∏ –í–∞–Ω –ø–æ–º–æ—â—å –ø–ª–µ–º–µ–Ω–∏ –ú–∞?)" },
{ text: "‰∏ç‰ΩôÈôçÁÅΩ", type: "inversion", explanation: "–∏–Ω–≤–µ—Ä—Å–∏—è –ø—Ä–∏ ‰∏ç + ‰Ωô (–ù–µ –ø–æ—à–ª—ë—Ç –ª–∏ –æ–Ω –±–µ–¥—Å—Ç–≤–∏–µ –Ω–∞–º?)" },
{ text: "Áéã‰ª§Â©¶Â•Ω‰ºê", type: "standard", explanation: "—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (–í–∞–Ω –ø—Ä–∏–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–≤–µ—Å—Ç–∫–µ –•–∞–æ –Ω–∞–ø–∞–¥–∞—Ç—å)" },
{ text: "‰∏çÊúïÂèóÁ¶è", type: "inversion", explanation: "–∏–Ω–≤–µ—Ä—Å–∏—è –ø—Ä–∏ ‰∏ç + Êúï (–ù–µ –¥–∞—Ä—É–µ—Ç –ª–∏ –æ–Ω –º–Ω–µ —Å—á–∞—Å—Ç—å—è?)" },
{ text: "ÂúüÊñπÂæÅ‰∫éÊàëÊù±ÈÑô", type: "standard", explanation: "—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (–ü–ª–µ–º—è –¢—É –Ω–∞–ø–∞–ª–æ –Ω–∞ –Ω–∞—à—É –≤–æ—Å—Ç–æ—á–Ω—É—é –æ–∫—Ä–∞–∏–Ω—É)" },
{ text: "‰∏çÊàëÁÜØ", type: "inversion", explanation: "–∏–Ω–≤–µ—Ä—Å–∏—è –ø—Ä–∏ ‰∏ç + Êàë (–ù–µ –∏—Å—Å—É—à–∏—Ç –ª–∏ –æ–Ω –Ω–∞—Å?)" },
{ text: "ÂÖÅÊúâ‰æÜËâ±", type: "standard", explanation: "—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏—à–ª–æ –±–µ–¥—Å—Ç–≤–∏–µ)" }
];

function shuffleArray(array) {
for (let i = array.length - 1; i > 0; i--) {
const j = Math.floor(Math.random() * (i + 1));
[array[i], array[j]] = [array[j], array[i]];
}
return array;
}

function createSentenceElement(sentence, index) {
const item = document.createElement('div');
item.className = 'sentence-item';
item.dataset.index = index;

item.innerHTML = `
<div class="oracle-text">${sentence.text}</div>
<div class="toggle-container">
<span class="toggle-text">–∏–Ω–≤–µ—Ä—Å–∏—è</span>
<label class="toggle-switch">
<input type="checkbox">
<span class="slider"></span>
</label>
<span class="toggle-text">—Å—Ç–∞–Ω–¥–∞—Ä—Ç</span>
</div>
`;

return item;
}

function init() {
const shuffled = shuffleArray([...sentences]);
const column1 = document.getElementById('column1');
const column2 = document.getElementById('column2');

column1.innerHTML = '';
column2.innerHTML = '';
document.getElementById('result').style.display = 'none';

// –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å—Ç–∏–ª–µ–π
document.querySelectorAll('.sentence-item').forEach(el => {
el.classList.remove('correct', 'incorrect');
});

shuffled.slice(0, 5).forEach((s, i) => {
const el = createSentenceElement(s, i);
column1.appendChild(el);
});

shuffled.slice(5).forEach((s, i) => {
const el = createSentenceElement(s, i + 5);
column2.appendChild(el);
});
}

function checkAnswers() {
const items = document.querySelectorAll('.sentence-item');
let allCorrect = true;

items.forEach(item => {
const index = item.dataset.index;
const input = item.querySelector('input');
const expectedType = sentences[index].type;
const isCorrect = (input.checked && expectedType === "inversion") ||
(!input.checked && expectedType === "standard");

item.classList.remove('correct', 'incorrect');
if (isCorrect) {
item.classList.add('correct');
} else {
item.classList.add('incorrect');
allCorrect = false;
}
});

const resultEl = document.getElementById('result');
if (allCorrect) {
resultEl.innerHTML = `‚úÖ <b>–û—Ç–ª–∏—á–Ω–æ!</b> –í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ –≤—Å–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å –∏–Ω–≤–µ—Ä—Å–∏–µ–π.`;
resultEl.className = 'success';
sendResult(true);
} else {
resultEl.innerHTML = `‚ùå <b>–û—à–∏–±–∫–∞</b> –≤ –æ–¥–Ω–æ–º –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è—Ö.`;
resultEl.className = 'error';
sendResult(false);
}
resultEl.style.display = 'block';
}

function reset() {
document.querySelectorAll('.toggle-switch input').forEach(input => {
input.checked = false;
});
document.querySelectorAll('.sentence-item').forEach(item => {
item.classList.remove('correct', 'incorrect');
});
document.getElementById('result').style.display = 'none';
}

function sendResult(success) {
window.parent.postMessage({
type: "TASK_RESULT",
success: success,
message: success ? "–í–µ—Ä–Ω–æ" : "–û—à–∏–±–∫–∞"
}, "*");
}

window.onload = init;
window.parent.postMessage({ type: "TASK_EXISTS", valid: true }, "*");

document.getElementById('check-btn').addEventListener('click', checkAnswers);
document.getElementById('reset-btn').addEventListener('click', reset);
</script>
</body>
</html>