<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href="../../tasks.css">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>–ò–Ω–≤–µ—Ä—Å–∏—è vs –ü—Ä—è–º–æ–π –ø–æ—Ä—è–¥–æ–∫: –£—Ä–æ–∫ 5</title>
</head>
<body>

<h2>–ò–Ω–≤–µ—Ä—Å–∏—è vs –ü—Ä—è–º–æ–π –ø–æ—Ä—è–¥–æ–∫</h2>

<div class="instructions">
    <div class="instructions-header" onclick="toggleInstructions()">
        <strong>üìå –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–Ω–∞–∂–º–∏ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)</strong>
        <span class="arrow">‚ñº</span>
    </div>
    <div class="instructions-content" style="display:none">
        <p><strong>–ò–Ω–≤–µ—Ä—Å–∏—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –∞—Ä—Ö–∞–∏—á–µ—Å–∫–æ–º –∫–∏—Ç–∞–π—Å–∫–æ–º</strong></p>
        <p>–í –∞—Ä—Ö–∞–∏—á–µ—Å–∫–æ–º –¥—Ä–µ–≤–Ω–µ–∫–∏—Ç–∞–π—Å–∫–æ–º —è–∑—ã–∫–µ –±–µ—Å–ø—Ä–µ–¥–ª–æ–∂–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è (–æ—Å–æ–±–µ–Ω–Ω–æ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è) –º–æ–≥—É—Ç —Å—Ç–æ—è—Ç—å –ø–µ—Ä–µ–¥ –≥–ª–∞–≥–æ–ª–æ–º ‚Äî —ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è <strong>–∏–Ω–≤–µ—Ä—Å–∏–µ–π</strong>.</p>

        <p>üü¢ <strong>–ü—Ä—è–º–æ–π –ø–æ—Ä—è–¥–æ–∫</strong> (–∑–µ–ª–µ–Ω—ã–π):</p>
        <ul>
            <li>–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏—Ç –ø–æ—Å–ª–µ –≥–ª–∞–≥–æ–ª–∞: ¬´ÂèóÊàë‰Ωë¬ª ‚Äî ¬´–ø–æ—Å–ª–∞—Ç—å –Ω–∞–º –ø–æ–º–æ—â—å¬ª</li>
            <li>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —É—Ç–≤–µ—Ä–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö</li>
        </ul>

        <p>üî¥ <strong>–ò–Ω–≤–µ—Ä—Å–∏—è</strong> (–∫—Ä–∞—Å–Ω—ã–π):</p>
        <ul>
            <li>–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ (—á–∞—â–µ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ) —Å—Ç–æ–∏—Ç <strong>–ø–µ—Ä–µ–¥</strong> –≥–ª–∞–≥–æ–ª–æ–º: ¬´‰∏çÊàëÂèó‰Ωë¬ª ‚Äî ¬´–Ω–µ –ø–æ—à–ª—ë—Ç –Ω–∞–º –ø–æ–º–æ—â–∏¬ª</li>
            <li>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –≤ <strong>–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö</strong> —Å –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ–º-–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º</li>
            <li>–¢–æ–ª—å–∫–æ —Å –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ–º <strong>‰∏ç</strong>, –∞ –Ω–µ Âºó</li>
        </ul>

        <p><em>–ü—Ä–∏–º–µ—Ä—ã:</em><br>
        "Â∏ùÂèóÊàë‰Ωë" ‚Üí üü¢ (–ø—Ä—è–º–æ–π –ø–æ—Ä—è–¥–æ–∫)<br>
        "Â∏ù‰∏çÊàëÂèó‰Ωë" ‚Üí üî¥ (–∏–Ω–≤–µ—Ä—Å–∏—è)</p>

        <p><strong>–í–∞–∂–Ω–æ!</strong><br>
        –ò–Ω–≤–µ—Ä—Å–∏—è <strong>–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞</strong>, –µ—Å–ª–∏:
        <ol>
            <li>–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ</li>
            <li>–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Äî –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ</li>
            <li>–ì–ª–∞–≥–æ–ª —Ç—Ä–µ–±—É–µ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è (Âèó, Èôç, ‰Ωú –∏ –¥—Ä.)</li>
        </ol>
        –ù–∞—Ä—É—à–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ ‚Äî –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞.</p>
    </div>
</div>

<script>
function toggleInstructions() {
    const content = document.querySelector('.instructions-content');
    const header = document.querySelector('.instructions-header');
    const arrow = header.querySelector('.arrow');
    const isHidden = content.style.display === 'none';

    content.style.display = isHidden ? 'block' : 'none';
    arrow.textContent = isHidden ? '‚ñ≤' : '‚ñº';

    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è –æ –Ω–æ–≤–æ–π –≤—ã—Å–æ—Ç–µ
    setTimeout(() => {
        window.parent.postMessage({
            type: "UPDATE_HEIGHT",
            height: document.body.scrollHeight
        }, "*");
    }, 100);
}
</script>

<div class="columns">
    <div id="column1" class="column"></div>
    <div id="column2" class="column"></div>
</div>

<div class="controls">
    <button id="check-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <button id="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
</div>

<p id="result"></p>

<script>
const sentences = [
    { text: "Â∏ùÂèóÊàë‰Ωë", type: "direct", explanation: "–ù–µ–±–µ—Å–Ω—ã–π –í–ª–∞–¥—ã–∫–∞ –ø–æ—à–ª—ë—Ç –Ω–∞–º –ø–æ–º–æ—â—å ‚Äî –ø—Ä—è–º–æ–π –ø–æ—Ä—è–¥–æ–∫, —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ" },
    { text: "Â∏ù‰∏çÊàëÂèó‰Ωë", type: "inversion", explanation: "–ù–µ–±–µ—Å–Ω—ã–π –í–ª–∞–¥—ã–∫–∞ –Ω–µ –ø–æ—à–ª—ë—Ç –Ω–∞–º –ø–æ–º–æ—â–∏ ‚Äî –∏–Ω–≤–µ—Ä—Å–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –≤ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–∏ —Å –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ–º" },
    { text: "Â∏ùÈôçÊàëÁÜØ", type: "direct", explanation: "–ù–µ–±–µ—Å–Ω—ã–π –í–ª–∞–¥—ã–∫–∞ –ø–æ—à–ª—ë—Ç –Ω–∞–º –∑–∞—Å—É—Ö—É ‚Äî –ø—Ä—è–º–æ–π –ø–æ—Ä—è–¥–æ–∫, —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ" },
    { text: "Â∏ù‰∏çÊàëÈôçÁÜØ", type: "inversion", explanation: "–ù–µ–±–µ—Å–Ω—ã–π –í–ª–∞–¥—ã–∫–∞ –Ω–µ –ø–æ—à–ª—ë—Ç –Ω–∞–º –∑–∞—Å—É—Ö—É ‚Äî –∏–Ω–≤–µ—Ä—Å–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞" },
    { text: "Ê¥π‰ΩúÂÖπÈÇëÁ•∏", type: "direct", explanation: "–†–µ–∫–∞ –•—É–∞–Ω—å –Ω–∞–Ω–µ—Å—ë—Ç –Ω–µ—Å—á–∞—Å—Ç—å–µ —ç—Ç–æ–º—É –≥–æ—Ä–æ–¥—É ‚Äî –ø—Ä—è–º–æ–π –ø–æ—Ä—è–¥–æ–∫" },
    { text: "Ê¥πÂºó‰ΩúÂÖπÈÇëÁ•∏", type: "direct", explanation: "–†–µ–∫–∞ –•—É–∞–Ω—å –Ω–µ –Ω–∞–Ω–µ—Å—ë—Ç –Ω–µ—Å—á–∞—Å—Ç—å–µ —ç—Ç–æ–º—É –≥–æ—Ä–æ–¥—É ‚Äî –∑–¥–µ—Å—å Âºó, –Ω–æ –Ω–µ—Ç –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è, –∏–Ω–≤–µ—Ä—Å–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è" },
    { text: "Â∏ù‰∏çÊàëÂÖ∂Âèó‰Ωë", type: "inversion", explanation: "–ù–µ–±–µ—Å–Ω—ã–π –í–ª–∞–¥—ã–∫–∞ –Ω–µ –ø–æ—à–ª—ë—Ç –ª–∏ –Ω–∞–º –ø–æ–º–æ—â–∏? ‚Äî –∏–Ω–≤–µ—Ä—Å–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–∞–∂–µ —Å —á–∞—Å—Ç–∏—Ü–µ–π ÂÖ∂" },
    { text: "‰ΩôÂÖ∂ÂæóÊ±ù", type: "direct", explanation: "–Ø –ø–æ–ª—É—á—É —Ç–µ–±—è ‚Äî –ø—Ä—è–º–æ–π –ø–æ—Ä—è–¥–æ–∫, —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –Ω–µ—Ç –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è" },
    { text: "‰Ωô‰∏çÂÖ∂ÂæóÊ±ù", type: "inversion", explanation: "–Ø –Ω–µ –ø–æ–ª—É—á—É –ª–∏ —Ç–µ–±—è? ‚Äî –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ + –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ ‚Üí –∏–Ω–≤–µ—Ä—Å–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞" },
    { text: "Êúï‰Ωø", type: "direct", explanation: "–º–æ–π –ø–æ—Å–ª–∞–Ω–Ω–∏–∫ ‚Äî –∑–¥–µ—Å—å Êúï –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –Ω–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ" }
];

function shuffleArray(array) {
    const arr = [...array];
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
}

function createSentenceElement(sentence, index) {
    const item = document.createElement('div');
    item.className = 'sentence-item';
    item.dataset.index = index;

    item.innerHTML = `
        <div class="oracle-text">${sentence.text}</div>
        <div class="toggle-container">
            <span class="toggle-text">–ø—Ä—è–º–æ–π</span>
            <label class="toggle-switch">
                <input type="checkbox">
                <span class="slider"></span>
            </label>
            <span class="toggle-text">–∏–Ω–≤–µ—Ä—Å–∏—è</span>
        </div>
    `;

    return item;
}

function init() {
    const shuffled = shuffleArray([...sentences]);
    const column1 = document.getElementById('column1');
    const column2 = document.getElementById('column2');

    column1.innerHTML = '';
    column2.innerHTML = '';
    document.getElementById('result').style.display = 'none';

    document.querySelectorAll('.sentence-item').forEach(el => el.remove());

    shuffled.slice(0, 5).forEach((s, i) => {
        const el = createSentenceElement(s, i);
        column1.appendChild(el);
    });

    shuffled.slice(5).forEach((s, i) => {
        const el = createSentenceElement(s, i + 5);
        column2.appendChild(el);
    });
}

function checkAnswers() {
    const items = document.querySelectorAll('.sentence-item');
    let allCorrect = true;

    items.forEach(item => {
        const index = item.dataset.index;
        const input = item.querySelector('input');
        const expectedType = sentences[index].type;
        const isCorrect = (input.checked && expectedType === "inversion") ||
                          (!input.checked && expectedType === "direct");

        item.classList.remove('correct', 'incorrect');
        if (isCorrect) {
            item.classList.add('correct');
        } else {
            item.classList.add('incorrect');
            allCorrect = false;
        }
    });

    const resultEl = document.getElementById('result');
    if (allCorrect) {
        resultEl.innerHTML = `
            ‚úÖ <b>–û—Ç–ª–∏—á–Ω–æ!</b> –í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ –≤—Å–µ —Å–ª—É—á–∞–∏ –∏–Ω–≤–µ—Ä—Å–∏–∏.<br>
            <small>–í—ã —É—Å–≤–æ–∏–ª–∏: –∏–Ω–≤–µ—Ä—Å–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –≤ –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è—Ö —Å –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ–º, –¥–∞–∂–µ —Å —á–∞—Å—Ç–∏—Ü–µ–π ÂÖ∂, –∏ —Ç–æ–ª—å–∫–æ —Å ‰∏ç.</small>
        `;
        resultEl.className = 'success';
        sendResult(true);
    } else {
        resultEl.innerHTML = `‚ùå <b>–û—à–∏–±–∫–∞</b> –≤ –æ–¥–Ω–æ–º –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è—Ö.`;
        resultEl.className = 'error';
        sendResult(false);
    }
    resultEl.style.display = 'block';
}

function reset() {
    document.querySelectorAll('.toggle-switch input').forEach(input => {
        input.checked = false;
    });
    document.querySelectorAll('.sentence-item').forEach(item => {
        item.classList.remove('correct', 'incorrect');
    });
    document.getElementById('result').style.display = 'none';
}

function sendResult(success) {
    window.parent.postMessage({
        type: "TASK_RESULT",
        success: success,
        message: success ? "–í–µ—Ä–Ω–æ" : "–û—à–∏–±–∫–∞"
    }, "*");
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
window.onload = init;
window.parent.postMessage({ type: "TASK_EXISTS", valid: true }, "*");

document.getElementById('check-btn').addEventListener('click', checkAnswers);
document.getElementById('reset-btn').addEventListener('click', reset);
</script>
</body>
</html>