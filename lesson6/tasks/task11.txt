<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href="../../tasks.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Урок 6: 眔</title>
</head>
<body>
<h2>В каких случаях можно использовать 眔?</h2>
<div id="options"></div>
<button id="check">Проверить</button>
<p id="result" class="message"></p>
<script>
    const items = [
        { text: "冓眔㱿", correct: true },
        { text: "王使眔貞", correct: true },
        { text: "不其眔叶", correct: false },
        { text: "佑眔禍", correct: true },
        { text: "贞不我受佑眔", correct: false }
    ];

    const container = document.getElementById("options");
    items.forEach(item => {
        const label = document.createElement("label");
        const input = document.createElement("input");
        input.type = "checkbox";
        input.dataset.correct = item.correct;
        label.append(input, document.createTextNode(item.text));
        container.appendChild(label);
    });

    document.getElementById("check").addEventListener("click", () => {
        const checked = document.querySelectorAll('input[type="checkbox"]:checked');
        const correctChecked = Array.from(checked).filter(cb => cb.dataset.correct === "true").length;
        const totalCorrect = items.filter(i => i.correct).length;
        const allCorrect = correctChecked === totalCorrect && 
                           Array.from(checked).every(cb => cb.dataset.correct === "true");

        const result = document.getElementById("result");
        if (allCorrect) {
            result.innerHTML = "✅ Верно! <strong>眔</strong> соединяет имена, но не глаголы и не частицы.";
            sendResult(true);
        } else {
            result.textContent = `❌ Неверно. Подумайте: можно ли соединять глаголы или частицы с помощью 眔?`;
            sendResult(false);
        }
    });

    function sendResult(success) {
        window.parent.postMessage({ type: "TASK_RESULT", success }, "*");
    }

    window.parent.postMessage({ type: "TASK_EXISTS", valid: true }, "*");
</script>
</body>
</html>