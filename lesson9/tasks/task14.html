<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href="../../tasks.css">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>–≠–º—Ñ–∞–∑–∞: –£—Ä–æ–∫ 9</title>
</head>
<body>

<h2>–≠–º—Ñ–∞–∑–∞: –í—ã–¥–µ–ª–µ–Ω–∏–µ —á–ª–µ–Ω–æ–≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h2>

<div class="instructions">
    <div class="instructions-header" onclick="toggleInstructions()">
        <strong>üìå –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–Ω–∞–∂–º–∏ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)</strong>
        <span class="arrow">‚ñº</span>
    </div>
    <div class="instructions-content" style="display:none">
        <p><strong>–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ vs –≠–º—Ñ–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</strong></p>
        <p>–í –∞—Ä—Ö–∞–∏—á–µ—Å–∫–æ–º –¥—Ä–µ–≤–Ω–µ–∫–∏—Ç–∞–π—Å–∫–æ–º —è–∑—ã–∫–µ –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è (–∞–∫—Ü–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è) –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —á–ª–µ–Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è <strong>—ç–º—Ñ–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</strong>. –≠—Ç–æ –∫–ª—é—á–µ–≤–∞—è —Ç–µ–º–∞ –£—Ä–æ–∫–∞ 9.</p>

        <p>üü¢ <strong>–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</strong> ‚Äî —á–ª–µ–Ω—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å—Ç–æ—è—Ç –≤ —Å–≤–æ–µ–π –æ–±—ã—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏:</p>
        <ul>
            <li>ÁéãÂãøÂæûÊ¥óÈúá w√°ng w√π c√≥ng x«ê zh√®n ‚Äî ¬´–ü—Ä–∞–≤–∏—Ç–µ–ª—é –Ω–µ —Å–ª–µ–¥—É–µ—Ç —Å–ª–µ–¥–æ–≤–∞—Ç—å –∑–∞ –ß–∂—ç–Ω–µ–º¬ª</li>
            <li>È°∫Â∫è: –ü–æ–¥–ª–µ–∂–∞—â–µ–µ (Áéã) ‚Üí –û—Ç—Ä–∏—Ü–∞–Ω–∏–µ (Âãø) ‚Üí –°–∫–∞–∑—É–µ–º–æ–µ (Âæû) ‚Üí –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ (Ê¥óÈúá)</li>
            <li>–ù–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤, –Ω–∏–∫–∞–∫–æ–≥–æ –æ—Å–æ–±–æ–≥–æ –∞–∫—Ü–µ–Ω—Ç–∞.</li>
        </ul>

        <p>üî¥ <strong>–≠–º—Ñ–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</strong> ‚Äî –≤—ã–¥–µ–ª—è–µ–º—ã–π —á–ª–µ–Ω –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –º–∞—Ä–∫–∏—Ä—É–µ—Ç—Å—è —á–∞—Å—Ç–∏—Ü–µ–π <strong>ÂîØ (w√©i)</strong> –∏ —á–∞—Å—Ç–æ –º–µ–Ω—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é:</p>
        <ul>
            <li>ÁéãÂãøÂîØÊ¥óÈúáÂæû w√°ng w√π w√©i x«ê zh√®n c√≥ng ‚Äî ¬´–ù–µ –∑–∞ <strong>–ß–∂—ç–Ω–µ–º</strong> –ª–∏ –ø—Ä–∞–≤–∏—Ç–µ–ª—é –Ω–µ —Å–ª–µ–¥—É–µ—Ç —Å–ª–µ–¥–æ–≤–∞—Ç—å?¬ª</li>
            <li>–ß–∞—Å—Ç–∏—Ü–∞ <strong>ÂîØ</strong> —Å—Ç–∞–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–¥–µ–ª—è–µ–º–æ–≥–æ —á–ª–µ–Ω–∞ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ ‚Äî –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è <strong>Ê¥óÈúá</strong>).</li>
            <li>–í—ã–¥–µ–ª—è–µ–º—ã–π —á–ª–µ–Ω —á–∞—Å—Ç–æ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–∫–∞–∑—É–µ–º–æ–µ.</li>
            <li>–°–æ–∑–¥–∞–µ—Ç –≤–æ–ø—Ä–æ—Å-–¥–æ–≥–∞–¥–∫—É: ¬´–∏–º–µ–Ω–Ω–æ —ç—Ç–æ?¬ª, ¬´–∏–º–µ–Ω–Ω–æ –æ–Ω?¬ª</li>
        </ul>

        <p><em>–ü—Ä–∏–º–µ—Ä—ã:</em><br>
        "ÁéãÂãøÂæûÊ¥óÈúá" ‚Üí üü¢ (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ)<br>
        "ÁéãÂãøÂîØÊ¥óÈúáÂæû" ‚Üí üî¥ (—ç–º—Ñ–∞–∑–∞ –Ω–∞ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ ¬´–ß–∂—ç–Ω—å¬ª)</p>

        <p><strong>–í–∞–∂–Ω–æ!</strong><br>
        –≠–º—Ñ–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
        <ol>
            <li>–î–ª—è <strong>–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è</strong> –ø–æ–¥–ª–µ–∂–∞—â–µ–≥–æ, –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∏–ª–∏ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞.</li>
            <li>–° —á–∞—Å—Ç–∏—Ü–µ–π <strong>ÂîØ (w√©i)</strong>, –∫–æ—Ç–æ—Ä–∞—è —Å–ª–µ–¥—É–µ—Ç <strong>–ø–æ—Å–ª–µ</strong> –≤—ã–¥–µ–ª—è–µ–º–æ–≥–æ —á–ª–µ–Ω–∞.</li>
            <li>–ß—Ç–æ–±—ã –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤ <strong>–≤–æ–ø—Ä–æ—Å-–¥–æ–≥–∞–¥–∫—É</strong> –∏–ª–∏ –ø—Ä–∏–¥–∞–Ω–∏–µ –æ—Å–æ–±–æ–≥–æ –≤–µ—Å–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —á–∞—Å—Ç–∏ –≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏—è.</li>
            <li>–í –≤–æ–ø—Ä–æ—Å–∞—Ö, –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö—Å—è —Å <strong>Ë¥û (zhƒìn)</strong>, –∫–∞–∫ –≤ —Ç–µ–∫—Å—Ç–∞—Ö –≥–∞–¥–∞–Ω–∏–π.</li>
        </ol>
        –≠—Ç–æ –∫–ª—é—á–µ–≤–∞—è –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –£—Ä–æ–∫–∞ 9.</p>
    </div>
</div>

<script>
function toggleInstructions() {
    const content = document.querySelector('.instructions-content');
    const header = document.querySelector('.instructions-header');
    const arrow = header.querySelector('.arrow');
    const isHidden = content.style.display === 'none';

    content.style.display = isHidden ? 'block' : 'none';
    arrow.textContent = isHidden ? '‚ñ≤' : '‚ñº';

    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è –æ –Ω–æ–≤–æ–π –≤—ã—Å–æ—Ç–µ
    setTimeout(() => {
        window.parent.postMessage({
            type: "UPDATE_HEIGHT",
            height: document.body.scrollHeight
        }, "*");
    }, 100);
}
</script>

<div class="columns">
    <div id="column1" class="column"></div>
    <div id="column2" class="column"></div>
</div>

<div class="controls">
    <button id="check-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <button id="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
</div>

<p id="result"></p>

<script>
const sentences = [
    { text: "ÁéãÂãøÂæûÊ¥óÈúá", type: "direct", explanation: "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: ¬´–ü—Ä–∞–≤–∏—Ç–µ–ª—é –Ω–µ —Å–ª–µ–¥—É–µ—Ç —Å–ª–µ–¥–æ–≤–∞—Ç—å –∑–∞ –ß–∂—ç–Ω–µ–º¬ª ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–µ–∑ –∞–∫—Ü–µ–Ω—Ç–∞" },
    { text: "ÁéãÂãøÂîØÊ¥óÈúáÂæû", type: "chain", explanation: "–≠–º—Ñ–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: —á–∞—Å—Ç–∏—Ü–∞ ÂîØ –≤—ã–¥–µ–ª—è–µ—Ç –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ¬´Ê¥óÈúá¬ª ‚Äî ¬´–ù–µ –∑–∞ –ß–∂—ç–Ω–µ–º –ª–∏ –ø—Ä–∞–≤–∏—Ç–µ–ª—é –Ω–µ —Å–ª–µ–¥—É–µ—Ç —Å–ª–µ–¥–æ–≤–∞—Ç—å?¬ª" },
    { text: "‰ªäÊò•ÁéãÂæûÊ¥óÈúá", type: "direct", explanation: "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: ¬´–í–µ—Å–Ω–æ–π —ç—Ç–æ–≥–æ –≥–æ–¥–∞ –ø—Ä–∞–≤–∏—Ç–µ–ª—å —Å–ª–µ–¥—É–µ—Ç –∑–∞ –ß–∂—ç–Ω–µ–º¬ª ‚Äî –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ –æ–±—ã—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏" },
    { text: "ÁéãÂîØÊ¥óÈúáÂæû", type: "chain", explanation: "–≠–º—Ñ–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: ¬´–ò–º–µ–Ω–Ω–æ –∑–∞ –ß–∂—ç–Ω–µ–º —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∞–≤–∏—Ç–µ–ª—å?¬ª ‚Äî –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å –ø–æ–º–æ—â—å—é ÂîØ" },
    { text: "‰ªäÊò•ÁéãÈÄêÂÖï", type: "direct", explanation: "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: ¬´–í–µ—Å–Ω–æ–π —ç—Ç–æ–≥–æ –≥–æ–¥–∞ –ø—Ä–∞–≤–∏—Ç–µ–ª—å –æ—Ö–æ—Ç–∏—Ç—Å—è –Ω–∞ –Ω–æ—Å–æ—Ä–æ–≥–∞¬ª ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞" },
    { text: "Ë≤ûÂîØËå≤ÂïÜÊúâ‰ΩúÁ¶ç", type: "chain", explanation: "–≠–º—Ñ–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: ¬´–ù–µ –≤ —ç—Ç–æ–º –ª–∏ –≥–æ—Ä–æ–¥–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –±–µ–¥—Å—Ç–≤–∏–µ?¬ª ‚Äî —á–∞—Å—Ç–∏—Ü–∞ ÂîØ –≤—ã–¥–µ–ª—è–µ—Ç –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–æ –º–µ—Å—Ç–∞ ¬´Ëå≤ÂïÜ¬ª" },
    { text: "Êàë‰ΩøÂÖ∂ÁÉñ", type: "direct", explanation: "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: ¬´–Ø –ø–æ—à–ª—é –Ω–∞ –Ω–µ–≥–æ –±–µ–¥—Å—Ç–≤–∏–µ¬ª ‚Äî –ø–æ–¥–ª–µ–∂–∞—â–µ–µ ¬´Êàë¬ª –≤ –æ–±—ã—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏" },
    { text: "Ë≤ûÂîØÊàëÁ¶ç", type: "chain", explanation: "–≠–º—Ñ–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: ¬´–ù–µ –Ω–∞–º –ª–∏ –≥—Ä–æ–∑–∏—Ç –±–µ–¥—Å—Ç–≤–∏–µ?¬ª ‚Äî –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –ø–æ–¥–ª–µ–∂–∞—â–µ–º ¬´Êàë¬ª —Å –ø–æ–º–æ—â—å—é ÂîØ" },
    { text: "Â£¨Â∞ÑË≤ùÈπø", type: "direct", explanation: "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: ¬´–†—ç–Ω—å –≤—ã—Å—Ç—Ä–µ–ª–∏–ª –≤ –æ–ª–µ–Ω—è –ë—ç–π¬ª ‚Äî –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ –æ–±—ã—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏" },
    { text: "Ë≤ûÂîØÁ¶çÊàë", type: "chain", explanation: "–≠–º—Ñ–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: ¬´–ù–µ –±–µ–¥—Å—Ç–≤–∏–µ –ª–∏ –≥—Ä–æ–∑–∏—Ç –Ω–∞–º?¬ª ‚Äî –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥–ª–µ–∂–∞—â–µ–≥–æ ¬´Á¶ç¬ª (–±–µ–¥—Å—Ç–≤–∏–µ) —Å –ø–æ–º–æ—â—å—é ÂîØ" }
];

function shuffleArray(array) {
    const arr = [...array];
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
}

function createSentenceElement(sentence, index) {
    const item = document.createElement('div');
    item.className = 'sentence-item';
    item.dataset.index = index;

    item.innerHTML = `
        <div class="oracle-text">${sentence.text}</div>
        <div class="toggle-container">
            <span class="toggle-text">–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ</span>
            <label class="toggle-switch">
                <input type="checkbox">
                <span class="slider"></span>
            </label>
            <span class="toggle-text">–≠–º—Ñ–∞—Ç–∏—á–µ—Å–∫–æ–µ</span>
        </div>
    `;

    return item;
}

function init() {
    const shuffled = shuffleArray([...sentences]);
    const column1 = document.getElementById('column1');
    const column2 = document.getElementById('column2');

    column1.innerHTML = '';
    column2.innerHTML = '';
    document.getElementById('result').style.display = 'none';

    document.querySelectorAll('.sentence-item').forEach(el => el.remove());

    shuffled.slice(0, 5).forEach((s, i) => {
        const el = createSentenceElement(s, i);
        column1.appendChild(el);
    });

    shuffled.slice(5).forEach((s, i) => {
        const el = createSentenceElement(s, i + 5);
        column2.appendChild(el);
    });
}

function checkAnswers() {
    const items = document.querySelectorAll('.sentence-item');
    let allCorrect = true;

    items.forEach(item => {
        const index = item.dataset.index;
        const input = item.querySelector('input');
        const expectedType = sentences[index].type;
        const isCorrect = (input.checked && expectedType === "chain") ||
                          (!input.checked && expectedType === "direct");

        item.classList.remove('correct', 'incorrect');
        if (isCorrect) {
            item.classList.add('correct');
        } else {
            item.classList.add('incorrect');
            allCorrect = false;
        }
    });

    const resultEl = document.getElementById('result');
    if (allCorrect) {
        resultEl.innerHTML = `
            ‚úÖ <b>–û—Ç–ª–∏—á–Ω–æ!</b> –í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ –≤—Å–µ —Å–ª—É—á–∞–∏ —ç–º—Ñ–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.<br>
            <small>–í—ã —É—Å–≤–æ–∏–ª–∏: —á–∞—Å—Ç–∏—Ü–∞ ÂîØ ‚Äî –∫–ª—é—á–µ–≤–æ–π –º–∞—Ä–∫–µ—Ä –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –≤ –¥—Ä–µ–≤–Ω–µ–∫–∏—Ç–∞–π—Å–∫–æ–º —è–∑—ã–∫–µ.</small>
        `;
        resultEl.className = 'success';
        sendResult(true);
    } else {
        resultEl.innerHTML = `‚ùå <b>–û—à–∏–±–∫–∞</b> –≤ –æ–¥–Ω–æ–º –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è—Ö.`;
        resultEl.className = 'error';
        sendResult(false);
    }
    resultEl.style.display = 'block';
}

function reset() {
    document.querySelectorAll('.toggle-switch input').forEach(input => {
        input.checked = false;
    });
    document.querySelectorAll('.sentence-item').forEach(item => {
        item.classList.remove('correct', 'incorrect');
    });
    document.getElementById('result').style.display = 'none';
}

function sendResult(success) {
    window.parent.postMessage({
        type: "TASK_RESULT",
        success: success,
        message: success ? "–í–µ—Ä–Ω–æ" : "–û—à–∏–±–∫–∞"
    }, "*");
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
window.onload = init;
window.parent.postMessage({ type: "TASK_EXISTS", valid: true }, "*");

document.getElementById('check-btn').addEventListener('click', checkAnswers);
document.getElementById('reset-btn').addEventListener('click', reset);
</script>
</body>
</html>